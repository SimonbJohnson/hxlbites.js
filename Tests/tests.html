<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Tests</title>
    <script src="../hxl.js"></script>
    <script src="../hxlBites.js"></script>
    <script src="../hxlBitesChart.js"></script>
    <script src="../hxlBitesTimeSeries.js"></script>
    <script src="../hxlBitesCrossTables.js"></script>
    <script src="../hxlBitesMap.js"></script>
    <script src="../hxlBitesRender.js"></script>
    <script src="../hxlBitesTable.js"></script>
    <script src="../hxlBitesText.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
  </head>
  <body>
    <p>Open console to see tests</p>
  </body>
  <script>

    console.log('Running Tests');
  	/*$.ajax({
  		url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
  		success: function(result){
        let output = hxlBites.data(result).getMapBites();
        console.log(output);
        if(output.length>8){
          console.error('Map Test Fail: Too many results');
        } else {
          console.log('Map Test Pass');
        }

        let bite = hxlBites.data(result).reverse('map0002/#country+code/2/#affected+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('chart0009/#country+name/1/#affected+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('map0002/#adm1+code/4/#affected+idps+ind/6');
        console.log(bite);

      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
        output = hxlBites.data(result).reverse('text0012/#affected+idps+ind/6');
        console.log(output);
        console.log("Text bites success");

      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?filter01=cut&cut-include-tags01=%23modality%2C+%23channel&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1s-piTxQUT0Q8ReO6uVy-72ZFb3R9K3I5zAnb2YNN83c%2Fedit%23gid%3D1496776846',
      success: function(result){
        let output = hxlBites.data(result).getChartBites();
        console.log(output);
        if(output.length==3){
          console.log("Modality chart bite success");
        } else {
          console.warn("Modality chart bite fail");
        }
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv',
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv',
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
      success: function(result){
        let output = hxlBites.data(result).getMapBites();
        console.log(output);
        if(output.length>8){
          console.error('Map Test Fail: Too many results');
        } else if (output[0].uniqueID != 'map0002/#country+code/2/#affected+hh+idps/5') {
          console.error('Map Test Fail: Unexpected ID');
          console.log(output[0].uniqueID);
        } else {
          console.log('Map Test Pass');
        }

        let bite = hxlBites.data(result).reverse('map0002/#country+code/2/#affected+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('chart0009/#country+name/1/#affected+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('map0002/#adm1+code/4/#affected+idps+ind/6');
        console.log(bite);

      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv",
      success: function(result){
        console.log(result);
        //console.log(hxlBites.data(result).getTimeSeriesBites());
        //console.log(hxlBites.data(result).reverse('time0002/#date+event/0/#affected+infected+total/7'));
        console.log(hxlBites.data(result).reverse('chart0021/#adm2+health+name/4/#affected+confirmed+infected/6'));
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fbeta.proxy.hxlstandard.org%2Fdata%2F1d0a79%2Fdownload%2Fafrica-dtm-baseline-assessments-topline.csv",
      success: function(result){
        console.log(hxlBites.data(result).getTextBites());
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?filter01=replace-map&replace-map-url01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1hTE0U3V8x18homc5KxfA7IIrv1Y9F1oulhJt0Z4z3zo%2Fedit%23gid%3D0&filter02=merge&merge-url02=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1GugpfyzridvfezFcDsl6dNlpZDqI8TQJw-Jx52obny8%2Fedit%23gid%3D0&merge-keys02=%23country%2Bname&merge-tags02=%23country%2Bcode&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1eo0HCLg-kcRe3716DZbgSOA3dWBopJNcECeswFSFCYs%2Fedit%23gid%3D0",
      success: function(result){
        //console.log(hxlBites.data(result).getTimeSeriesBites());
        console.log(result)
        console.log(hxlBites.data(result).reverse('map0001/#country+code/10'));
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?force=1&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1lH4KPEGMpEAaYtEAMU-UddBXcqX5usMQzT8u-BMJ2PY%2Fedit%23gid%3D0",
      success: function(result){
        console.log(result)
        console.log(hxlBites.data(result).reverse('cross0001/#loc/0/#status/7'));
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?filter01=sort&sort-tags01=%23date%2Bevent&sort-reverse01=on&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1azJVeMiZMTJOjuKEFNETSlmaVDD0kQQXSHnhjEnEsfI%2Fedit%23gid%3D0",
      success: function(result){
        console.log(result)
        console.log(hxlBites.data(result).reverse('time0002/#date+event/0/#affected+confirmed+infected+new/17'));
        //console.log(hxlBites.data(result).reverse('time0002/#date+event/0/#affected+killed+new/11'));
      },
      error: function(err){
        console.log(err);
      }
    });

    $.ajax({
      url: "https://proxy.hxlstandard.org/data.json?filter01=replace-map&replace-map-url01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1hTE0U3V8x18homc5KxfA7IIrv1Y9F1oulhJt0Z4z3zo%2Fedit%23gid%3D0&filter02=merge&merge-url02=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1GugpfyzridvfezFcDsl6dNlpZDqI8TQJw-Jx52obny8%2Fedit%23gid%3D0&merge-keys02=%23country%2Bname&merge-tags02=%23country%2Bcode&filter03=clean&clean-date-tags03=%23date&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1rVAE8b3uC_XIqU-eapUGLU7orIzYSUmvlPm9tI0bCbU%2Fedit%23gid%3D0",
      success: function(result){
        console.log(hxlBites.data(result));
      },
      error: function(err){
        console.log(err);
      }
    });*/
    /*$.ajax({
      url: "https://proxy.hxlstandard.org/data.json?filter01=cut&cut-skip-untagged01=on&filter02=select&select-query02-01=%23date%2Boccurred%3E2018-12-31&url=https%3A%2F%2Fproxy.hxlstandard.org%2Fdata%2Fe0c1eb.csv%3Furl%3Dhttps%253A%252F%252Fapi.acleddata.com%252Facled%252Fread.csv%253Flimit%253D0%2526terms%253Daccept%2526iso%253D716%26name%3DACLEDHXL%26tagger-match-all%3Don%26tagger-02-header%3Diso%26tagger-02-tag%3D%2523country%252Bcode%26tagger-03-header%3Devent_id_cnty%26tagger-03-tag%3D%2523event%252Bcode%26tagger-05-header%3Devent_date%26tagger-05-tag%3D%2523date%252Boccurred%2B%26tagger-08-header%3Devent_type%26tagger-08-tag%3D%2523event%252Btype%26tagger-09-header%3Dactor1%26tagger-09-tag%3D%2523group%252Bname%252Bfirst%26tagger-10-header%3Dassoc_actor_1%26tagger-10-tag%3D%2523group%252Bname%252Bfirst%252Bassoc%26tagger-12-header%3Dactor2%26tagger-12-tag%3D%2523group%252Bname%252Bsecond%26tagger-13-header%3Dassoc_actor_2%26tagger-13-tag%3D%2523group%252Bname%252Bsecond%252Bassoc%26tagger-16-header%3Dregion%26tagger-16-tag%3D%2523region%252Bname%26tagger-17-header%3Dcountry%26tagger-17-tag%3D%2523country%252Bname%26tagger-18-header%3Dadmin1%26tagger-18-tag%3D%2523adm1%252Bname%26tagger-19-header%3Dadmin2%26tagger-19-tag%3D%2523adm2%252Bname%26tagger-20-header%3Dadmin3%26tagger-20-tag%3D%2523adm3%252Bname%26tagger-21-header%3Dlocation%26tagger-21-tag%3D%2523loc%252Bname%26tagger-22-header%3Dlatitude%26tagger-22-tag%3D%2523geo%252Blat%26tagger-23-header%3Dlongitude%26tagger-23-tag%3D%2523geo%252Blon%26tagger-25-header%3Dsource%26tagger-25-tag%3D%2523meta%252Bsource%26tagger-27-header%3Dnotes%26tagger-27-tag%3D%2523description%26tagger-28-header%3Dfatalities%26tagger-28-tag%3D%2523affected%252Bkilled%26header-row%3D1",
      success: function(result){
        console.log(result[1]);
        //console.log(hxlBites.data(result).getMapBites());
        console.log(hxlBites.data(result).reverse('map0003/#geo+lat/14/#geo+lon/15'));
      },
      error: function(err){
        console.log(err);
      }
    });*/
    /*$.ajax({
      url: "https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdata.humdata.org%2Fdataset%2F1a770477-7083-41bb-a88a-54f7b857c297%2Fresource%2Fd7474bd7-c11c-4f87-b709-24bc4ec5119c%2Fdownload%2Ffts_requirements_funding_cluster_pse.csv",
      success: function(result){
        console.log(hxlBites.data(result).getTimeSeriesBites());
      },
      error: function(err){
        console.log(err);
      }
    $.ajax({
        url: "https://proxy.hxlstandard.org/data.json?force=on&filter01=cut&cut-skip-untagged01=o&url=https%3A%2F%2Fproxy.hxlstandard.org%2Fdata.csv%3Ffilter01%3Dadd%26add-tag01%3D%2523date%252Byear%26add-value01%3D%257B%257B%2523date%257D%257D%26add-header01%3DYear%26filter02%3Dreplace%26replace-pattern02%3D%2528%255Cd%257B4%257D%2529-.%252A%26replace-regex02%3Don%26replace-value02%3D%255C1%26replace-tags02%3D%2523date%252Byear%26url%3Dhttps%253A%252F%252Fdocs.google.com%252Fspreadsheets%252Fd%252Fe%252F2PACX-1vQt8wd_saDzHip7lcXkmnxe7Wxyy7_snDLCv3lDpUNLcRF5lSBGbztkqlo2zwWXkXxiFHIAyZhyp9hU%252Fpub%253Fgid%253D831696165%2526single%253Dtrue%2526output%253Dcsv",
      success: function(result){
        console.log(hxlBites.data(result).getTimeSeriesBites());
      },
      error: function(err){
        console.log(err);
      }
    });*/
    $.ajax({
        url: "https://proxy.hxlstandard.org/data.json?force=on&filter01=cut&cut-skip-untagged01=o&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1JMzLwLWsImzZ9bzbdhNSXd7XcrSW6lbkQsTvhzjLgfc%2Fedit%23gid%3D1800165124",
      success: function(result){
        console.log(hxlBites.data(result).getMapBites());
      },
      error: function(err){
        console.log(err);
      }
    });
    /*$.ajax({
        url: "https://proxy.hxlstandard.org/data.json?filter01=cut&cut-skip-untagged01=on&url=https%3A%2F%2Fdata.humdata.org%2Fdataset%2Fa138154a-be9a-464a-bd73-619443f3a9ac%2Fresource%2F6fe01c88-a0c0-4016-a9f1-e8c94228dc14%2Fdownload%2Fsind-in-harms-way-dataset-2017-2019.xlsx",
      success: function(result){
        console.log(hxlBites.data(result).getChartBites());
        console.log(hxlBites.data(result).getTimeSeriesBites());
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
        url: "https://proxy.hxlstandard.org/data.json?filter01=cut&cut-include-tags01=%23date%2C%23adm1%2C%23adm2%2C%23affected%2Binfected%2Bconfirmed&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv",
      success: function(result){
        console.log(hxlBites.data(result).getChartBites());
        console.log(hxlBites.data(result).getTimeSeriesBites());
        console.log(hxlBites.data(result).reverse('chart0009/#adm1+health+name/2/#affected+confirmed+infected/4/timefilter'));
        console.log(hxlBites.data(result).reverse('chart0009/#adm1+health+name/2/#affected+confirmed+infected/4'));
      },
      error: function(err){
        console.log(err);
      }
    });*/

    $.ajax({
        url: "https://proxy.hxlstandard.org/data.json?filter01=cut&cut-include-tags01=%23date%2C%23adm1%2C%23adm2%2C%23affected%2Binfected%2Bconfirmed&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv",
      success: function(result){
        console.log(hxlBites.data(result).getChartBites());
        console.log(hxlBites.data(result).getTimeSeriesBites());
        console.log(hxlBites.data(result).reverse('chart0009/#adm2+health+name/3/#affected+confirmed+infected/4/timefilter'));
        console.log(hxlBites.data(result).reverse('chart0018/#adm2+health+name/3/#affected+confirmed+infected/4'));
      },
      error: function(err){
        console.log(err);
      }
    });

  </script>
</html>